<html lang="eng">
<head>
	<title>Manage News | Reprise</title>
	<link rel="stylesheet" type="text/css" href="../css/style.css">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
	<!-- angular install-->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.3/angular.min.js"></script>
	<!-- angular app and controller -->
	<!-- angular app -->
	<script src="../third-party/tinymce/tinymce.min.js"></script>
	<script src="../js/repriseApp.js"></script>
	<script src="../js/repriseNewsManage.js"></script>
	<!-- tinyMCE -->
</head>
<script>
</script>
<body ng-app="reprise">
	<div class="wrapper news" ng-controller="manageNews">
		<div class="reprise__col reprise--sidebar">
			<div ng-include="'../includes/sidebar.html'">
			</div>
		</div>
		<div class="reprise__col reprise--main">
			<h2>Manage News Articles</h2>
			<p>
				<span ng-if="!published">View, edit and publish news articles.</span>
				<span ng-if="published" class="text--green"><b>Your article was published successfully!</b></span>
			</p>
			<a href="../add-news" class="button">Create new article</a> 
			<p ng-if="!news">
				<i>You have no existing news articles. Write your first one today!</i>
			</p>
			<div ng-if="news!=false" class="news__existing">
				<table>
				<tr>
					<th>Article</th>
					<th>Status</th>
					<th>Last edited</th>
					<th></th>
				</tr>
				<tr class="news__article" ng-repeat="item in news | orderBy: '-date'">
					<td>
						<a ng-href="../edit-news?id={{ item.id }}">{{ item.name }}</a>
					</td>
					<td>
						{{ getStatus(item.changes, item.live) }}
					</td>
					<td>
						{{ dateTimeString(item.date) | date: "medium" }}
					</td>
					<td>
						<a class="button button--small" ng-click="deleteArticle(item.id)">Delete</a>
					</td>
				</tr>
				</table>
			</div>
		</div>
		<div ng-class="status.httpReq ? 'active' : '' " class="status">
			<div class="in-progress">
			</div>
			<div ng-class="status.complete ? 'active' : '' " class="complete">
				<img src="../img/icons/tick.png"/>
				<span>{{ success }}</span>
			</div>
			<div class="error" style="display:none;">
				<img src="../img/icons/error.png"/>
			</div>
		</div>
	</div>
</body>
</html>